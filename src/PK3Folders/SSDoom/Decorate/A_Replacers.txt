Actor DSS_WeaponSpawnerBase : CustomInventory 
{
	+DONTGIB +NOTONAUTOMAP
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
}

Actor DSS_ChainsawSpawner : DSS_WeaponSpawnerBase replaces Chainsaw
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 ACS_NamedExecuteWithResult("SetSpawn",4)
		TNT1 A 0 A_JumpIf(CallAcs("GetSpawn",4) == 4,"Spawn4")
		TNT1 A 0 A_JumpIf(CallAcs("GetSpawn",4) == 3,"Spawn3")
		TNT1 A 0 A_JumpIf(CallAcs("GetSpawn",4) == 2,"Spawn2")
		TNT1 A 0 A_SpawnItem("DSS_ChainsawSpawn")
		stop
	Spawn2:
		TNT1 A 0 A_SpawnItem("DSS_ColtSpawn")
    	stop
	Spawn3:
		TNT1 A 0 A_SpawnItem("DSS_FlamethrowerSpawn")
		stop
	Spawn4:
		TNT1 A 0 ACS_NamedExecuteWithResult("SetSpawn",2)
		TNT1 A 0 A_JumpIf(CallAcs("GetSpawn",2) == 3,"Spawn5")
		TNT1 A 0 A_SpawnItem("DSS_SniperRifleSpawn")
		stop
	Spawn5:
		TNT1 A 0 A_SpawnItem("DSS_MiniGunSpawn")
		stop
	}
}

Actor DSS_ShotgunSpawner : DSS_WeaponSpawnerBase replaces Shotgun
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 ACS_NamedExecuteWithResult("SetSpawn",0)
		TNT1 A 0 A_JumpIf(CallAcs("GetSpawn",0) == 3,"Spawn3")
		TNT1 A 0 A_JumpIf(CallAcs("GetSpawn",0) == 2,"Spawn2")
		TNT1 A 0 A_SpawnItem("DSS_ColtSpawn")
    	stop
	Spawn2:
		TNT1 A 0 A_SpawnItem("DSS_ShotgunSpawn")
		stop
	Spawn3:
		TNT1 A 0 ACS_NamedExecuteWithResult("SetSpawn",1) // Spawn an SSG
		TNT1 A 0 A_JumpIf(CallAcs("GetSpawn",1) == 3,"Spawn4")
		TNT1 A 0 A_SpawnItem("DSS_CoachGunSpawn")
		stop
	Spawn4:
		TNT1 A 0 A_SpawnItem("DSS_FlamethrowerSpawn")
		stop
	Drop:
		TNT1 A 0
		TNT1 A 0 A_DropItem("DSS_Shotgun")
		stop
	}
}

Actor DSS_SuperShotgunSpawner : DSS_WeaponSpawnerBase replaces SuperShotgun
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 ACS_NamedExecuteWithResult("SetSpawn",1)
		TNT1 A 0 A_JumpIf(CallAcs("GetSpawn",1) == 3,"Spawn3")
		TNT1 A 0 A_JumpIf(CallAcs("GetSpawn",1) == 2,"Spawn2")
		TNT1 A 0 A_SpawnItem("DSS_ShotgunSpawn")
		stop
	Spawn2:
		TNT1 A 0 A_SpawnItem("DSS_CoachGunSpawn")
		stop
	Spawn3:
		TNT1 A 0 A_SpawnItem("DSS_FlamethrowerSpawn")
		stop
	}
}

Actor DSS_ChaingunSpawner : DSS_WeaponSpawnerBase replaces Chaingun
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 ACS_NamedExecuteWithResult("SetSpawn",2)
		TNT1 A 0 A_JumpIf(CallAcs("GetSpawn",2) == 3,"Spawn3")
		TNT1 A 0 A_JumpIf(CallAcs("GetSpawn",2) == 2,"Spawn2")
		TNT1 A 0 A_SpawnItem("DSS_TommyGunSpawn")
		stop
	Spawn2:
		TNT1 A 0 A_SpawnItem("DSS_SniperRifleSpawn")
		stop
	Spawn3:
		TNT1 A 0 A_SpawnItem("DSS_MiniGunSpawn")
		stop
	Drop:
		TNT1 A 0
		TNT1 A 0 A_DropItem("DSS_TommyGun")
		stop
	}
}

Actor DSS_RocketLauncherSpawner : DSS_WeaponSpawnerBase replaces RocketLauncher
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 ACS_NamedExecuteWithResult("SetSpawn",3)
		TNT1 A 0 A_JumpIf(CallAcs("GetSpawn",3) == 2,"Spawn2")
		TNT1 A 0 A_SpawnItem("DSS_RocketLauncherSpawn")
		stop
	Spawn2:
		TNT1 A 0 A_SpawnItem("DSS_GrenadeLauncherSpawn")
		stop
	}
}

Actor DSS_PlasmaGunSpawner : DSS_WeaponSpawnerBase replaces PlasmaRifle
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_LaserGunSpawn")
		stop
	}
}

Actor DSS_BFGSpawner : DSS_WeaponSpawnerBase replaces BFG9000
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_CannonSpawn")
		stop
	}
}

Actor DSS_WeaponSpawnBase : CustomInventory 
{
	+DONTGIB +NOTONAUTOMAP
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	Inventory.PickupMessage ""
}

Actor DSS_HasWeapon : Inventory 
{
	Inventory.MaxAmount 1
	Inventory.PickupMessage ""
}

Actor DSS_ChainsawSpawn : DSS_WeaponSpawnBase
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_Chainsaw")
        TNT1 A -1
		stop
	Pickup:
		TNT1 A 100 A_PlaySound("q/chainsaw/1",5)
		stop
	}
}

Actor DSS_ColtSpawn : DSS_WeaponSpawnBase
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_Revolvers")
        TNT1 A -1
		stop
	Pickup:
		TNT1 A 100 A_PlaySound("q/colt/1",5)
		stop
	}
}

Actor DSS_HasShotgun : DSS_HasWeapon {}
Actor DSS_ShotgunSpawn : DSS_WeaponSpawnBase
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_Shotgun")
        TNT1 A -1
		stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("DSS_HasShotgun",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("DSS_HasShotgun")
		TNT1 A 100 A_PlaySound("q/shotgun/1",5)
		stop
	Pickup2:
		TNT1 A 100 A_PlaySound("q/shotgun/2",5)
		stop
	}
}

Actor DSS_HasCoachGun : DSS_HasWeapon {}
Actor DSS_CoachGunSpawn : DSS_WeaponSpawnBase
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_CoachGun")
        TNT1 A -1
		stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("DSS_HasCoachGun",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("DSS_HasCoachGun")
		TNT1 A 100 A_PlaySound("q/coachgun/1",5)
		stop
	Pickup2:
		TNT1 A 100 A_PlaySound("q/coachgun/2",5)
		stop
	}
}

Actor DSS_TommyGunSpawn : DSS_WeaponSpawnBase
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_TommyGun")
        TNT1 A -1
		stop
	Pickup:
		TNT1 A 100 A_PlaySound("q/tommygun/1",5)
		stop
	}
}

Actor DSS_HasMiniGun : DSS_HasWeapon {}
Actor DSS_MinigunSpawn : DSS_WeaponSpawnBase
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_Minigun")
        TNT1 A -1
		stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("DSS_HasMiniGun",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("DSS_HasMiniGun")
		TNT1 A 100 A_PlaySound("q/minigun/1",5)
		stop
	Pickup2:
		TNT1 A 100 A_PlaySound("q/minigun/2",5)
		stop
	}
}

Actor DSS_HasGrenadeLauncher : DSS_HasWeapon {}
Actor DSS_GrenadeLauncherSpawn : DSS_WeaponSpawnBase
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_GrenadeLauncher")
        TNT1 A -1
		stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("DSS_HasGrenadeLauncher",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("DSS_HasGrenadeLauncher")
		TNT1 A 100 A_PlaySound("q/grenade/1",5)
		stop
	Pickup2:
		TNT1 A 100 A_PlaySound("q/grenade/2",5)
		stop
	}
}

Actor DSS_HasRocketLauncher : DSS_HasWeapon {}
Actor DSS_RocketLauncherSpawn : DSS_WeaponSpawnBase
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_RocketLauncher")
        TNT1 A -1
		stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("DSS_HasRocketLauncher",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("DSS_HasRocketLauncher")
		TNT1 A 100 A_PlaySound("q/rocket/1",5)
		stop
	Pickup2:
		TNT1 A 100 A_PlaySound("q/rocket/2",5)
		stop
	}
}

Actor DSS_HasLaserGun : DSS_HasWeapon {}
Actor DSS_LaserGunSpawn : DSS_WeaponSpawnBase
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_LaserGun")
        TNT1 A -1
		stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("DSS_HasLaserGun",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("DSS_HasLaserGun")
		TNT1 A 100 A_PlaySound("q/laser/1",5)
		stop
	Pickup2:
		TNT1 A 100 A_PlaySound("q/laser/2",5)
		stop
	}
}

Actor DSS_HasFlamethrower : DSS_HasWeapon {}
Actor DSS_FlamethrowerSpawn : DSS_WeaponSpawnBase
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_Flamethrower")
        TNT1 A -1
		stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("DSS_HasFlamethrower",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("DSS_HasFlamethrower")
		TNT1 A 100 A_PlaySound("q/flame/1",5)
		stop
	Pickup2:
		TNT1 A 100 A_PlaySound("q/flame/2",5)
		stop
	}
}

Actor DSS_HasSniperRifle : DSS_HasWeapon {}
Actor DSS_SniperRifleSpawn : DSS_WeaponSpawnBase
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_SniperRifle")
        TNT1 A -1
		stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("DSS_HasSniperRifle",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("DSS_HasSniperRifle")
		TNT1 A 100 A_PlaySound("q/sniper/1",5)
		stop
	Pickup2:
		TNT1 A 100 A_PlaySound("q/sniper/2",5)
		stop
	}
}

Actor DSS_HasCannon : DSS_HasWeapon {}
Actor DSS_CannonSpawn : DSS_WeaponSpawnBase
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_SpawnItem("DSS_Cannon")
        TNT1 A -1
		stop
	Pickup:
		TNT1 A 0 A_JumpIfInventory("DSS_HasCannon",1,"Pickup2")
		TNT1 A 0 A_GiveInventory("DSS_HasCannon")
		TNT1 A 100 A_PlaySound("q/cannon/1",5)
		stop
	Pickup2:
		TNT1 A 100 A_PlaySound("q/cannon/2",5)
		stop
	}
}
