Actor PPE_Machinegun : Chaingun
{
	+WEAPON.NOALERT
	Weapon.SisterWeapon "PPE_Machinegun_P"
	Inventory.Pickupmessage "$GOT_PPE_MG"
	Tag "$TAG_PPE_MG"
	Inventory.PickupSound "items/weapon2"
	Weapon.UpSound "weapons/switch"
	Weapon.SelectionOrder 800
	Weapon.SlotNumber 2
	Weapon.AmmoType "PPE_Bullets"
	Weapon.AmmoUse 1
	Weapon.AmmoGive 40
	Decal "BulletChip"
	DamageType "Quake3"
	States
	{
	Spawn:
		MACW A -1
		Stop
	Ready:
		MACC A 1 A_WeaponReady
		Loop
	Deselect:
		MACC A 1 A_Lower(18)
		Loop
	Select:
		TNT1 A 0 A_JumpIfInventory("PPE_MachinegunAlt",1,1)
		Goto SeLoop
		TNT1 A 0 A_GiveInventory("PPE_AltAmmo")
  	SeLoop:
		MACC A 1 A_Raise(18)
		Loop
	Fire:
	FirePhase1:
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_JumpIfInventory("PowerSilencer",0,2)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlayWeaponSound("weapons/machinegun/fire")
		TNT1 A 0 A_PlaySound("items/quad/use",2,CountInv("PowerQuadDamage"))
	    TNT1 A 0 A_FireBullets(2.0,2.0,1,(6),"PPE_RicBulletPuff",FBF_USEAMMO|FBF_NORANDOM)
		MACF ABC 1 bright
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_JumpIfInventory("PowerSilencer",0,2)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlayWeaponSound("weapons/machinegun/fire")
		TNT1 A 0 A_PlaySound("items/quad/use",2,CountInv("PowerQuadDamage"))
	    TNT1 A 0 A_FireBullets(2.0,2.0,1,(6),"PPE_RicBulletPuff",FBF_USEAMMO|FBF_NORANDOM)
		MACF DABC 1 bright
		TNT1 A 0 A_Refire
		MACF D 1 bright
		Goto Spindown
	Spindown:
		MACF E 1 bright A_WeaponReady
		MACF FF 1 bright A_WeaponReady
		MACF GGG 1 bright A_WeaponReady
		Goto Ready
	Flash:
		TNT1 A 1 A_Light1
		//TNT1 AA 1 A_SetPitch(pitch-0.4)
		TNT1 A 1 A_Light2
		//TNT1 A 1 A_SetPitch(pitch+0.8)
		Goto LightDone
	}
}

Actor PPE_Machinegun_P : Chaingun
{
	+WEAPON.POWERED_UP
	Weapon.SisterWeapon "PPE_Machinegun"
	Weapon.AmmoType "PPE_HeavyBullets"
	Weapon.AmmoUse 1
	Weapon.AmmoGive 0
	Decal "BulletChip"
	DamageType "Quake3"
	States
	{
	Ready:
		MACC A 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 A_TakeInventory("PowerAlt",1)
  	DeseLoop:
		MACC A 1 A_Lower(18)
		Loop
	Select:
		MACC A 1 A_Raise(18)
		Loop
	Fire:
	FirePhase1:
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_JumpIfInventory("PowerSilencer",0,2)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlayWeaponSound("weapons/machinegun/fire")
		TNT1 A 0 A_PlaySound("items/quad/use",2,CountInv("PowerQuadDamage"))
	    TNT1 A 0 A_FireBullets(2.0,2.0,1,(12),"PPE_RicBulletPuff",FBF_USEAMMO|FBF_NORANDOM)
		MACF ABC 1 bright
		TNT1 A 0 A_GunFlash
		TNT1 A 0 A_JumpIfInventory("PowerSilencer",0,2)
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlayWeaponSound("weapons/machinegun/fire")
		TNT1 A 0 A_PlaySound("items/quad/use",2,CountInv("PowerQuadDamage"))
	    TNT1 A 0 A_FireBullets(2.0,2.0,1,(12),"PPE_RicBulletPuff",FBF_USEAMMO|FBF_NORANDOM)
		MACF DABC 1 bright
		TNT1 A 0 A_Refire
		MACF D 1 bright
		Goto Spindown
	Spindown:
		MACF E 1 bright A_WeaponReady
		MACF FF 1 bright A_WeaponReady
		MACF GGG 1 bright A_WeaponReady
		Goto Ready
	Flash:
		TNT1 A 1 A_Light1
		//TNT1 AA 1 A_SetPitch(pitch-0.4)
		TNT1 A 1 A_Light2
		//TNT1 A 1 A_SetPitch(pitch+0.8)
		Goto LightDone
	}
}
