Actor PPE_Chainsaw : Chainsaw
{
	+Weapon.NoAlert
	Weapon.SlotNumber 1
	Weapon.SelectionOrder 2200
	Weapon.UpSound ""
	Inventory.Pickupmessage "$GOT_PPE_CHAINSAW"
	Tag "$TAG_PPE_CHAINSAW"
	Inventory.PickupSound "items/weapon2"
	Weapon.UpSound "weapons/switch"
	DamageType "Quake2Chainsaw"
	States
	{
	Ready:
		TNT1 A 0 A_PlaySound("weapons/melee/idle",6)
		CSWG CCDDEEFF 1 A_WeaponReady(WRF_ALLOWRELOAD|WRF_ALLOWUSER1)
		Loop
	Deselect:
		TNT1 A 0 A_StopSound(6)
	DeseLoop:
		TNT1 A 0 A_Lower
		TNT1 A 0 A_Lower
		CSWG C 1 A_Lower
		Loop
	Select:
		TNT1 A 0 A_Raise
		TNT1 A 0 A_Raise
		CSWG C 1 A_Raise
		Loop
	Fire:
		TNT1 A 0 A_PlayWeaponSound("weapons/melee/saw")
		TNT1 A 0 A_JumpIfInventory("PowerSilencer",0,2)
		TNT1 A 0 A_AlertMonsters
		CSWG C 1
	SwingLeftOff:
		CSWG C 1 Offset(8, 40)
		CSWG C 1 Offset(16, 48)
		CSWG C 1 Offset(24, 56)
		CSWG C 1 Offset(32, 64)
		Goto SkipSndLeftOff
	HoldLeftOff:
		TNT1 A 0 A_PlayWeaponSound("weapons/melee/saw")
		TNT1 A 0 A_PlaySound("items/quad/use",2,CountInv("PowerQuadDamage"))
		TNT1 A 6
	SkipSndLeftOff:
		TNT1 A 5
		CSWS A 1 Offset(128, 72)
		CSWS A 1 Offset(112, 64) // 10 - should one shot a pinky if all hits connect
		CSWS A 1 Offset(96, 55) A_FireBullets(-24,6,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileLeft", -6, 0, 24, 4)
		CSWS A 1 Offset(80, 48)
		CSWS A 1 Offset(64, 42) A_FireBullets(-16,4,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileLeft", -4, 0, 16, 6)
		CSWS A 1 Offset(48, 38)
		CSWS A 1 Offset(32, 33) A_FireBullets(-8,2,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileLeft", -2, 0, 8, 8)
		CSWS A 1 Offset(16, 28)
		CSWS A 1 Offset(0, 22) A_FireBullets(0,0,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileLeft", 0, 0, 0, 9)
		CSWS A 1 Offset(-16, 28)
		CSWS A 1 Offset(-32, 33) A_FireBullets(8,-2,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileLeft", 2, 0, -8, 8)
		CSWS A 1 Offset(-48, 38)
		CSWS A 1 Offset(-64, 42) A_FireBullets(16,-4,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileLeft", 4, 0, -16, 6)
		CSWS A 1 Offset(-80, 48)
		CSWS A 1 Offset(-96, 55) A_FireBullets(24,-6,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileLeft", 6, 0, -24, 4)
		CSWS A 1 Offset(-112, 64)
		CSWS A 1 Offset(-128, 72)
		TNT1 A 6
		TNT1 A 0 A_ReFire("HoldRightOff")
	SwingLeftEndOff:
		CSWG C 1 Offset(-32, 64)
		CSWG C 1 Offset(-24, 56)
		CSWG C 1 Offset(-16, 48)
		CSWG C 1 Offset(-8, 40)
		CSWG C 1
		Goto Ready
	SwingRightOff:
		CSWG C 1 Offset(-8, 40)
		CSWG C 1 Offset(-16, 48)
		CSWG C 1 Offset(-24, 56)
		CSWG C 1 Offset(-32, 64)
		Goto SkipSndRightOff
	HoldRightOff:
		TNT1 A 0 A_PlayWeaponSound("weapons/melee/saw")
		TNT1 A 0 A_PlaySound("items/quad/use",2,CountInv("PowerQuadDamage"))
		TNT1 A 6
	SkipSndRightOff:
		TNT1 A 5
		CSWS A 1 Offset(-128, 72)
		CSWS A 1 Offset(-112, 64)
		CSWS A 1 Offset(-96, 55) A_FireBullets(24,-6,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileRight", 6, 0, -24, 4)
		CSWS A 1 Offset(-80, 48)
		CSWS A 1 Offset(-64, 42) A_FireBullets(16,-4,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileRight", 4, 0, -16, 6)
		CSWS A 1 Offset(-48, 38)
		CSWS A 1 Offset(-32, 33) A_FireBullets(8,-2,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileRight", 2, 0, -8, 8)
		CSWS A 1 Offset(-16, 28)
		CSWS A 1 Offset(0, 22) A_FireBullets(0,0,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileRight", 0, 0, 0, 9)
		CSWS A 1 Offset(16, 28)
		CSWS A 1 Offset(32, 33) A_FireBullets(-8,2,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileRight", -2, 0, 8, 8)
		CSWS A 1 Offset(48, 38)
		CSWS A 1 Offset(64, 42) A_FireBullets(-16,4,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileRight", -4, 0, 16, 6)
		CSWS A 1 Offset(80, 48)
		CSWS A 1 Offset(96, 55) A_FireBullets(-24,6,-1,(22),"DSS_KnifePuff",FBF_NORANDOM|FBF_EXPLICITANGLE,72) //A_FireCustomMissile("PPE_ChainsawOffSwingMissileRight", -6, 0, 24, 4)
		CSWS A 1 Offset(112, 64)
		CSWS A 1 Offset(128, 72)
		TNT1 A 6
		TNT1 A 0 A_ReFire("HoldLeftOff")
	SwingRightEndOff:
		CSWG C 1 Offset(32, 64)
		CSWG C 1 Offset(24, 56)
		CSWG C 1 Offset(16, 48)
		CSWG C 1 Offset(8, 40)
		CSWG C 1
		Goto Ready
	Spawn:
		CSWW A -1
		stop
  }
}

Actor DSS_KnifePuff : BulletPuff
{
	+NOEXTREMEDEATH
	SeeSound "weapons/axeflesh"
	AttackSound "weapons/axehit"
	States
	{
	Spawn:
	Crash:
	Melee:
		TNT1 A 0
		PUFF AB 2 Bright
		PUFF CD 2
		Stop
  }
}